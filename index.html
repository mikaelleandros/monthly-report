<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finance Analytics 2026</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
:root {
  --bg:       #0a0c0f;
  --bg1:      #0f1218;
  --bg2:      #141820;
  --bg3:      #1a2030;
  --border:   #1e2535;
  --border2:  #252d3d;
  --accent:   #3b82f6;
  --accent2:  #10b981;
  --accent3:  #f59e0b;
  --accent4:  #ef4444;
  --accent5:  #8b5cf6;
  --text:     #e2e8f0;
  --text2:    #94a3b8;
  --text3:    #475569;
  --mono:     'IBM Plex Mono', monospace;
  --sans:     'IBM Plex Sans', sans-serif;
  --glow:     0 0 20px rgba(59,130,246,0.15);
}
* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ‚îÄ‚îÄ SCANLINE TEXTURE ‚îÄ‚îÄ */
body::after {
  content: '';
  position: fixed; inset: 0; pointer-events: none; z-index: 9999;
  background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px);
}

/* ‚îÄ‚îÄ GRID BACKGROUND ‚îÄ‚îÄ */
.grid-bg {
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background-image:
    linear-gradient(rgba(59,130,246,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59,130,246,0.03) 1px, transparent 1px);
  background-size: 40px 40px;
}

.wrap { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; padding: 0 24px 80px; }

/* ‚îÄ‚îÄ TOP BAR ‚îÄ‚îÄ */
.topbar {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 0;
  border-bottom: 1px solid var(--border);
  margin-bottom: 40px;
}
.topbar-left { display: flex; align-items: center; gap: 12px; }
.logo-mark {
  width: 32px; height: 32px; background: var(--accent);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; border-radius: 6px;
  box-shadow: 0 0 16px rgba(59,130,246,0.4);
}
.topbar-title { font-family: var(--mono); font-size: 13px; font-weight: 600; letter-spacing: 0.1em; color: var(--text); }
.topbar-sub   { font-family: var(--mono); font-size: 10px; color: var(--text3); letter-spacing: 0.08em; }
.topbar-right { font-family: var(--mono); font-size: 11px; color: var(--text3); }
.status-dot   { display: inline-block; width: 6px; height: 6px; background: var(--accent2); border-radius: 50%; margin-right: 6px; animation: pulse 2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

/* ‚îÄ‚îÄ SECTION TABS ‚îÄ‚îÄ */
.section-tabs {
  display: flex; gap: 2px;
  background: var(--bg1);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 4px;
  margin-bottom: 32px;
  width: fit-content;
}
.stab {
  font-family: var(--mono); font-size: 11px; font-weight: 500;
  letter-spacing: 0.08em; text-transform: uppercase;
  padding: 8px 20px; border-radius: 5px; border: none;
  background: transparent; color: var(--text3); cursor: pointer;
  transition: all 0.15s;
}
.stab:hover { color: var(--text2); }
.stab.active { background: var(--bg3); color: var(--accent); border: 1px solid var(--border2); }

/* ‚îÄ‚îÄ MONTH STRIP ‚îÄ‚îÄ */
.month-strip {
  display: flex; gap: 6px; overflow-x: auto;
  padding-bottom: 4px; margin-bottom: 36px;
  scrollbar-width: none;
}
.month-strip::-webkit-scrollbar { display: none; }
.mtab {
  font-family: var(--mono); font-size: 10px; font-weight: 500;
  letter-spacing: 0.06em; white-space: nowrap;
  padding: 8px 16px; border-radius: 4px;
  border: 1px solid var(--border);
  background: var(--bg1); color: var(--text3);
  cursor: pointer; transition: all 0.15s; flex-shrink: 0;
  text-align: center;
}
.mtab:hover:not(.coming):not(.active) { border-color: var(--border2); color: var(--text2); }
.mtab.active { background: var(--accent); border-color: var(--accent); color: #fff; box-shadow: var(--glow); }
.mtab.coming { cursor: not-allowed; opacity: 0.5; }
.mtab.coming:hover { border-color: var(--border); color: var(--text3); }
.mtab .mtab-name { display: block; }
.mtab .mtab-sub  { display: block; font-size: 9px; color: inherit; opacity: 0.7; margin-top: 2px; }
.mtab.coming .mtab-sub { color: var(--accent3); opacity: 1; }

/* ‚îÄ‚îÄ STAT CARDS ‚îÄ‚îÄ */
.stat-row { display: grid; grid-template-columns: repeat(4,1fr); gap: 12px; margin-bottom: 24px; }
.scard {
  background: var(--bg1); border: 1px solid var(--border);
  border-radius: 8px; padding: 20px;
  position: relative; overflow: hidden;
  transition: border-color 0.2s, transform 0.2s;
}
.scard:hover { border-color: var(--border2); transform: translateY(-2px); }
.scard::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
}
.scard.s-income::before   { background: var(--accent2); }
.scard.s-expense::before  { background: var(--accent4); }
.scard.s-transfer::before { background: var(--accent); }
.scard.s-net::before      { background: var(--accent5); }
.scard-label {
  font-family: var(--mono); font-size: 10px; letter-spacing: 0.1em;
  text-transform: uppercase; color: var(--text3); margin-bottom: 12px;
  display: flex; align-items: center; gap: 6px;
}
.scard-val {
  font-family: var(--mono); font-size: 22px; font-weight: 600;
  letter-spacing: -0.02em;
}
.s-income  .scard-val { color: var(--accent2); }
.s-expense .scard-val { color: var(--accent4); }
.s-transfer .scard-val { color: var(--accent); }
.s-net .scard-val.pos { color: var(--accent2); }
.s-net .scard-val.neg { color: var(--accent4); }
.scard-meme {
  position: absolute; bottom: 10px; right: 14px;
  font-size: 22px; opacity: 0.18;
}

/* ‚îÄ‚îÄ TWO COL ‚îÄ‚îÄ */
.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
.three-col { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 16px; }

/* ‚îÄ‚îÄ PANEL ‚îÄ‚îÄ */
.panel {
  background: var(--bg1); border: 1px solid var(--border);
  border-radius: 8px; overflow: hidden; margin-bottom: 16px;
}
.panel-hd {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 20px; border-bottom: 1px solid var(--border);
  background: var(--bg2);
}
.panel-hd h3 {
  font-family: var(--mono); font-size: 11px; font-weight: 500;
  letter-spacing: 0.1em; text-transform: uppercase; color: var(--text2);
}
.panel-hd .badge {
  font-family: var(--mono); font-size: 11px; font-weight: 600;
  color: var(--accent); background: rgba(59,130,246,0.1);
  padding: 2px 10px; border-radius: 20px;
}
.panel-hd .badge.green { color: var(--accent2); background: rgba(16,185,129,0.1); }
.panel-hd .badge.amber { color: var(--accent3); background: rgba(245,158,11,0.1); }

/* ‚îÄ‚îÄ CHARTS ‚îÄ‚îÄ */
.chart-wrap { padding: 20px; }
.pie-layout { display: flex; align-items: center; gap: 20px; }
.pie-layout canvas { flex-shrink: 0; }
.leg { flex: 1; }
.leg-item {
  display: flex; align-items: center; gap: 8px;
  padding: 5px 0; border-bottom: 1px solid var(--border);
  font-size: 12px;
}
.leg-item:last-child { border-bottom: none; }
.leg-dot { width: 8px; height: 8px; border-radius: 2px; flex-shrink: 0; }
.leg-name { flex: 1; color: var(--text2); font-family: var(--mono); font-size: 11px; }
.leg-pct  { font-family: var(--mono); font-size: 11px; color: var(--text3); }
.leg-amt  { font-family: var(--mono); font-size: 11px; font-weight: 600; color: var(--text); margin-left: 8px; }

/* ‚îÄ‚îÄ BAR BREAKDOWN ACCORDION ‚îÄ‚îÄ */
.bk-list { padding: 8px 0; }
.bk-item { border-bottom: 1px solid var(--border); }
.bk-item:last-child { border-bottom: none; }

.bk-row {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 20px; cursor: pointer;
  transition: background 0.12s;
  user-select: none;
}
.bk-row:hover { background: rgba(255,255,255,0.03); }
.bk-row.open   { background: rgba(59,130,246,0.05); }

.bk-chevron {
  font-size: 9px; color: var(--text3); flex-shrink: 0;
  transition: transform 0.2s; width: 12px; text-align: center;
}
.bk-row.open .bk-chevron { transform: rotate(90deg); color: var(--accent); }

.bk-name { font-family: var(--mono); font-size: 11px; color: var(--text2); width: 124px; flex-shrink: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.bk-track { flex: 1; height: 4px; background: var(--bg3); border-radius: 2px; overflow: hidden; }
.bk-fill  { height: 100%; border-radius: 2px; transition: width 0.7s cubic-bezier(.34,1.56,.64,1); }
.bk-count { font-family: var(--mono); font-size: 10px; color: var(--text3); width: 44px; text-align: right; flex-shrink: 0; }
.bk-amt   { font-family: var(--mono); font-size: 11px; font-weight: 600; width: 96px; text-align: right; flex-shrink: 0; }

/* ‚îÄ‚îÄ EXPANDED TRANSACTIONS ‚îÄ‚îÄ */
.bk-txns {
  display: none;
  background: var(--bg2);
  border-top: 1px solid var(--border);
}
.bk-txns.open { display: block; }
.bk-txn-table { width: 100%; border-collapse: collapse; font-size: 11px; }
.bk-txn-table th {
  font-family: var(--mono); font-size: 9px; font-weight: 600;
  letter-spacing: 0.1em; text-transform: uppercase; color: var(--text3);
  padding: 7px 20px 7px 40px; text-align: left;
  background: var(--bg); border-bottom: 1px solid var(--border);
}
.bk-txn-table th:last-child { text-align: right; padding-right: 20px; }
.bk-txn-table td {
  padding: 7px 20px 7px 40px;
  border-bottom: 1px solid rgba(30,37,53,0.7);
  color: var(--text2); vertical-align: middle;
}
.bk-txn-table td:last-child { text-align: right; padding-right: 20px; }
.bk-txn-table tr:last-child td { border-bottom: none; }
.bk-txn-table tr:hover td { background: rgba(255,255,255,0.02); }
.bk-txn-table .td-date { font-family: var(--mono); font-size: 10px; color: var(--text3); width: 60px; }
.bk-txn-table .td-name { color: var(--text); font-size: 11px; }
.bk-txn-table .td-acc  { font-family: var(--mono); font-size: 10px; color: var(--text3); }
.bk-txn-table .td-amt  { font-family: var(--mono); font-size: 11px; font-weight: 600; }
.bk-subtotal {
  display: flex; justify-content: space-between; align-items: center;
  padding: 8px 20px 8px 40px;
  border-top: 1px solid var(--border2);
  background: var(--bg);
}
.bk-subtotal span { font-family: var(--mono); font-size: 10px; color: var(--text3); letter-spacing: 0.08em; }
.bk-subtotal strong { font-family: var(--mono); font-size: 12px; font-weight: 600; }

/* ‚îÄ‚îÄ TABLES ‚îÄ‚îÄ */
.tbl-scroll { overflow-x: auto; max-height: 340px; overflow-y: auto; }
.tbl-scroll::-webkit-scrollbar { width: 4px; height: 4px; }
.tbl-scroll::-webkit-scrollbar-track { background: var(--bg2); }
.tbl-scroll::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }
table { width: 100%; border-collapse: collapse; font-size: 12px; }
thead th {
  font-family: var(--mono); font-size: 9px; font-weight: 600;
  letter-spacing: 0.12em; text-transform: uppercase; color: var(--text3);
  padding: 10px 16px; text-align: left; background: var(--bg2);
  position: sticky; top: 0; border-bottom: 1px solid var(--border);
}
tbody td { padding: 9px 16px; border-bottom: 1px solid var(--border); color: var(--text2); vertical-align: middle; }
tbody tr:last-child td { border-bottom: none; }
tbody tr:hover td { background: rgba(255,255,255,0.02); }
.td-date  { font-family: var(--mono); font-size: 11px; color: var(--text3); white-space: nowrap; }
.td-name  { color: var(--text); font-size: 12px; }
.td-amt   { font-family: var(--mono); font-size: 12px; font-weight: 600; text-align: right; white-space: nowrap; }
.td-acc   { font-family: var(--mono); font-size: 10px; color: var(--text3); }
.pill {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 2px 8px; border-radius: 3px;
  font-family: var(--mono); font-size: 10px; font-weight: 500;
  white-space: nowrap;
}

/* ‚îÄ‚îÄ YEARLY GRID ‚îÄ‚îÄ */
.year-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; padding: 20px; }
.ym-card {
  background: var(--bg2); border: 1px solid var(--border);
  border-radius: 6px; padding: 16px; transition: border-color 0.2s;
}
.ym-card.has-data { cursor: pointer; }
.ym-card.has-data:hover { border-color: var(--accent); }
.ym-card.no-data { opacity: 0.45; }
.ym-title { font-family: var(--mono); font-size: 12px; font-weight: 600; color: var(--text); margin-bottom: 10px; }
.ym-row { display: flex; justify-content: space-between; margin-bottom: 4px; }
.ym-key { font-family: var(--mono); font-size: 10px; color: var(--text3); }
.ym-val { font-family: var(--mono); font-size: 10px; font-weight: 600; }
.ym-bar { height: 3px; background: var(--bg3); border-radius: 2px; margin-top: 8px; overflow: hidden; }
.ym-bar-fill { height: 100%; border-radius: 2px; }
.ym-coming {
  font-family: var(--mono); font-size: 9px; letter-spacing: 0.1em;
  text-transform: uppercase; color: var(--accent3);
  display: flex; align-items: center; gap: 4px; margin-top: 6px;
}
.ym-end { font-family: var(--mono); font-size: 9px; color: var(--text3); margin-top: 2px; }

/* ‚îÄ‚îÄ CAT MEME TOOLTIP ‚îÄ‚îÄ */
.meme-strip {
  display: flex; gap: 12px; overflow: hidden;
  padding: 12px 20px; border-top: 1px solid var(--border);
  background: var(--bg);
}
.meme-item {
  font-family: var(--mono); font-size: 11px; color: var(--text3);
  white-space: nowrap; animation: ticker 30s linear infinite;
}
@keyframes ticker { 0%{transform:translateX(0)} 100%{transform:translateX(-50%)} }

/* ‚îÄ‚îÄ COMING SOON SCREEN ‚îÄ‚îÄ */
.coming-screen {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; padding: 80px 20px;
  text-align: center;
}
.coming-screen .cs-emoji { font-size: 56px; margin-bottom: 20px; animation: sway 2s ease-in-out infinite; }
@keyframes sway { 0%,100%{transform:rotate(-5deg)} 50%{transform:rotate(5deg)} }
.coming-screen h2 { font-family: var(--mono); font-size: 22px; font-weight: 600; color: var(--text); margin-bottom: 8px; }
.coming-screen p  { font-family: var(--mono); font-size: 12px; color: var(--text3); }
.coming-screen .cs-date { font-family: var(--mono); font-size: 14px; color: var(--accent3); font-weight: 600; margin-top: 12px; }

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
.fade { animation: fd 0.35s ease both; }
@keyframes fd { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:none} }
.d1{animation-delay:.04s} .d2{animation-delay:.08s} .d3{animation-delay:.12s} .d4{animation-delay:.16s}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:900px){
  .stat-row{grid-template-columns:1fr 1fr}
  .two-col,.three-col{grid-template-columns:1fr}
  .year-grid{grid-template-columns:1fr 1fr}
  .pie-layout{flex-direction:column}
}
@media(max-width:600px){
  .stat-row{grid-template-columns:1fr 1fr}
  .year-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>
<div class="grid-bg"></div>

<div class="wrap">

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-left">
    <div class="logo-mark">üê±</div>
    <div>
      <div class="topbar-title">FINANCE ANALYTICS</div>
      <div class="topbar-sub">PERSONAL ¬∑ NT$ ¬∑ 2025‚Äì2026</div>
    </div>
  </div>
  <div class="topbar-right">
    <span class="status-dot"></span>DATA CURRENT
  </div>
</div>

<!-- SECTION TABS -->
<div class="section-tabs">
  <button class="stab active" onclick="setView('monthly',this)">MONTHLY VIEW</button>
  <button class="stab" onclick="setView('yearly',this)">YEARLY OVERVIEW</button>
</div>

<!-- MONTH STRIP (shown in monthly view) -->
<div class="month-strip" id="monthStrip"></div>

<!-- MAIN CONTENT -->
<div id="content"></div>

<!-- CAT TICKER -->
<div style="background:var(--bg1);border:1px solid var(--border);border-radius:8px;overflow:hidden;margin-top:24px">
  <div style="padding:8px 20px;border-bottom:1px solid var(--border);font-family:var(--mono);font-size:9px;letter-spacing:0.12em;color:var(--text3)">// CAT_WISDOM.LOG</div>
  <div style="overflow:hidden;white-space:nowrap;padding:10px 0">
    <span style="display:inline-block;animation:ticker 40s linear infinite;font-family:var(--mono);font-size:11px;color:var(--text3)">
      &nbsp;&nbsp;&nbsp;&nbsp;üê± "I can has budget?" ‚Äî anonymous cat &nbsp;¬∑&nbsp; üìä Spending tracked. Cat approved. &nbsp;¬∑&nbsp; üòæ Your wallet when you check expenses &nbsp;¬∑&nbsp; üêà "Did I buy that? ...yes." &nbsp;¬∑&nbsp; üí∏ Money go brr. Cat go nom. &nbsp;¬∑&nbsp; üìâ Graph goes down. Cat judges silently. &nbsp;¬∑&nbsp; üòº Savings rate: meow% &nbsp;¬∑&nbsp; üê± "I can has budget?" ‚Äî anonymous cat &nbsp;¬∑&nbsp; üìä Spending tracked. Cat approved. &nbsp;¬∑&nbsp; üòæ Your wallet when you check expenses &nbsp;¬∑&nbsp; üêà "Did I buy that? ...yes." &nbsp;¬∑&nbsp; üí∏ Money go brr. Cat go nom. &nbsp;¬∑&nbsp; üìâ Graph goes down. Cat judges silently. &nbsp;¬∑&nbsp; üòº Savings rate: meow%
    </span>
  </div>
</div>

</div><!-- /wrap -->

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// DATA
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const DATA = {"expenses":[{"date":"Dec 1","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 1","month":"2025-12","name":"Belajar","amount":3203.0,"category":"School","account":"Post Office Bank","who":"Me"},{"date":"Dec 1","month":"2025-12","name":"Lunch","amount":75.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 1","month":"2025-12","name":"Dinner","amount":106.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 2","month":"2025-12","name":"Cuci baju","amount":20.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Dec 2","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 2","month":"2025-12","name":"Lunch","amount":64.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 2","month":"2025-12","name":"Dinner","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 3","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 3","month":"2025-12","name":"Lunch","amount":63.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 3","month":"2025-12","name":"Cereal","amount":70.0,"category":"Food & Drinks","account":"Cash","who":""},{"date":"Dec 3","month":"2025-12","name":"Dinner","amount":91.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 1","month":"2025-12","name":"Micro Econ paper","amount":15.0,"category":"School","account":"Cash","who":"Me"},{"date":"Dec 4","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 4","month":"2025-12","name":"Lunch","amount":74.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 4","month":"2025-12","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 5","month":"2025-12","name":"Breakfast","amount":45.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 5","month":"2025-12","name":"Lunch","amount":90.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 6","month":"2025-12","name":"Breakfast","amount":31.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 6","month":"2025-12","name":"Dinner","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 8","month":"2025-12","name":"Lunch","amount":75.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 8","month":"2025-12","name":"Handuk","amount":223.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 8","month":"2025-12","name":"Minum","amount":31.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 9","month":"2025-12","name":"Cuci baju","amount":20.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Dec 9","month":"2025-12","name":"Lunch","amount":99.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 9","month":"2025-12","name":"Dinner","amount":95.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 10","month":"2025-12","name":"Breakfast","amount":45.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 10","month":"2025-12","name":"Lunch","amount":78.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 10","month":"2025-12","name":"Dinner","amount":90.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 10","month":"2025-12","name":"Stok mie","amount":170.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 10","month":"2025-12","name":"Kertas kado","amount":16.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 11","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 11","month":"2025-12","name":"Lunch","amount":82.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 11","month":"2025-12","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 12","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 12","month":"2025-12","name":"Lunch","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 12","month":"2025-12","name":"Dinner","amount":40.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 13","month":"2025-12","name":"Lunch","amount":95.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 13","month":"2025-12","name":"Christmas OCSA","amount":150.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 15","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 14","month":"2025-12","name":"Detergent","amount":49.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Dec 15","month":"2025-12","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 15","month":"2025-12","name":"Dinner","amount":90.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 16","month":"2025-12","name":"Cuci baju","amount":20.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Dec 16","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 16","month":"2025-12","name":"Lunch","amount":68.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 16","month":"2025-12","name":"Dinner","amount":110.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 17","month":"2025-12","name":"Lunch","amount":66.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 17","month":"2025-12","name":"Dinner","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 18","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 18","month":"2025-12","name":"Lunch","amount":64.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 18","month":"2025-12","name":"renang edbert","amount":40.0,"category":"Adjustments","account":"ID Card","who":"Me"},{"date":"Dec 18","month":"2025-12","name":"Dinner","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 19","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 20","month":"2025-12","name":"Cuci baju","amount":40.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Dec 20","month":"2025-12","name":"Lunch","amount":85.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Lunch","amount":68.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Bus","amount":25.0,"category":"Personal","account":"ID Card","who":""},{"date":"Dec 22","month":"2025-12","name":"Bus","amount":26.0,"category":"Personal","account":"ID Card","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Bus","amount":50.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Exchange gereja","amount":140.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 22","month":"2025-12","name":"Sabun","amount":139.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 23","month":"2025-12","name":"Kuota","amount":1420.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 23","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 23","month":"2025-12","name":"Lunch","amount":50.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 23","month":"2025-12","name":"Snack roti","amount":30.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 24","month":"2025-12","name":"Lunch","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 24","month":"2025-12","name":"Dinner","amount":40.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 25","month":"2025-12","name":"Dinner","amount":50.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 25","month":"2025-12","name":"Dinner","amount":85.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 26","month":"2025-12","name":"Cuci baju","amount":20.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Dec 26","month":"2025-12","name":"Kartu & T-pass ricky","amount":350.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Dec 26","month":"2025-12","name":"T pass","amount":199.0,"category":"Personal","account":"ID Card","who":"Me"},{"date":"Dec 26","month":"2025-12","name":"Dinner","amount":105.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 26","month":"2025-12","name":"Sprite","amount":30.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 27","month":"2025-12","name":"Lunch","amount":50.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 27","month":"2025-12","name":"Dinner","amount":97.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 27","month":"2025-12","name":"Es krim","amount":20.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 29","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 29","month":"2025-12","name":"Lunch","amount":84.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 29","month":"2025-12","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 30","month":"2025-12","name":"Lunch","amount":69.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 30","month":"2025-12","name":"Dinner","amount":130.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 30","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 31","month":"2025-12","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 31","month":"2025-12","name":"Lunch","amount":50.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Dec 31","month":"2025-12","name":"Dinner","amount":368.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 1","month":"2026-01","name":"Minum","amount":26.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 1","month":"2026-01","name":"Adjustment","amount":172.0,"category":"Adjustments","account":"Cash","who":"Me"},{"date":"Jan 1","month":"2026-01","name":"Dinner","amount":110.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 2","month":"2026-01","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 2","month":"2026-01","name":"Lunch","amount":66.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 2","month":"2026-01","name":"Dinner","amount":220.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 2","month":"2026-01","name":"Sarung Tangan","amount":99.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Jan 2","month":"2026-01","name":"Cuci Baju","amount":20.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Jan 3","month":"2026-01","name":"Lunch","amount":105.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 3","month":"2026-01","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 4","month":"2026-01","name":"Lunch","amount":85.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 4","month":"2026-01","name":"Tiket kerta","amount":3390.0,"category":"Transport","account":"Post Office Bank","who":"Me"},{"date":"Jan 5","month":"2026-01","name":"Breakfast","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 5","month":"2026-01","name":"Kos","amount":55800.0,"category":"Personal","account":"Post Office Bank","who":""},{"date":"Jan 5","month":"2026-01","name":"Lunch","amount":99.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 5","month":"2026-01","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 5","month":"2026-01","name":"minum","amount":60.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 5","month":"2026-01","name":"print work permit","amount":6.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Jan 6","month":"2026-01","name":"Lunch","amount":91.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 6","month":"2026-01","name":"Dinner pt.1","amount":30.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 6","month":"2026-01","name":"Kereta MRT","amount":75.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 7","month":"2026-01","name":"Breakfast","amount":60.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 7","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 7","month":"2026-01","name":"Dinner","amount":158.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 8","month":"2026-01","name":"Brunch","amount":120.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 8","month":"2026-01","name":"Main","amount":20.0,"category":"Entertainment","account":"Cash","who":"Me"},{"date":"Jan 8","month":"2026-01","name":"Baju","amount":818.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Jan 8","month":"2026-01","name":"Dinner","amount":80.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 8","month":"2026-01","name":"Minum","amount":55.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 8","month":"2026-01","name":"Cereal","amount":99.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 9","month":"2026-01","name":"Dinner","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 9","month":"2026-01","name":"Minum lembur","amount":38.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 9","month":"2026-01","name":"Kereta","amount":75.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 10","month":"2026-01","name":"Breakfast","amount":60.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 10","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 10","month":"2026-01","name":"Dinner","amount":155.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 11","month":"2026-01","name":"Breakfast","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 11","month":"2026-01","name":"Lunch","amount":91.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 11","month":"2026-01","name":"Dinner","amount":129.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 11","month":"2026-01","name":"Breakfast","amount":36.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 12","month":"2026-01","name":"Dinner","amount":135.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 12","month":"2026-01","name":"Cuci Baju","amount":160.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Jan 13","month":"2026-01","name":"Breakfast","amount":65.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 13","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 13","month":"2026-01","name":"Dinner","amount":135.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 14","month":"2026-01","name":"Breakfast","amount":59.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 14","month":"2026-01","name":"snack lembur","amount":35.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 14","month":"2026-01","name":"Kereta MRT","amount":75.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"MRT","amount":30.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"Dinner","amount":165.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"Baju","amount":400.0,"category":"Personal","account":"Post Office Bank","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"Meza star","amount":120.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"Bus + MRT","amount":48.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"Dinner","amount":130.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 15","month":"2026-01","name":"Air","amount":22.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"Breakfast","amount":85.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"MRT","amount":25.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"Susu + air","amount":149.0,"category":"Food & Drinks","account":"ID Card","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"Pokemon","amount":450.0,"category":"Personal","account":"Cash","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"MRT + bus","amount":33.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"Bus + MRT","amount":48.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 16","month":"2026-01","name":"Dinner","amount":305.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 17","month":"2026-01","name":"Breakfast","amount":125.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 17","month":"2026-01","name":"Hard drive","amount":1472.0,"category":"Personal","account":"Post Office Bank","who":"Me"},{"date":"Jan 17","month":"2026-01","name":"Bus","amount":36.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 17","month":"2026-01","name":"Dinner","amount":228.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 18","month":"2026-01","name":"Breakfast","amount":120.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 18","month":"2026-01","name":"Capit","amount":100.0,"category":"Entertainment","account":"Cash","who":"Me"},{"date":"Jan 18","month":"2026-01","name":"Bus","amount":36.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 18","month":"2026-01","name":"Dinner","amount":257.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 19","month":"2026-01","name":"Breakfast","amount":58.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 19","month":"2026-01","name":"Lunch","amount":91.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 19","month":"2026-01","name":"Dinner","amount":129.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 20","month":"2026-01","name":"Dinner","amount":136.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 20","month":"2026-01","name":"Cuci Baju","amount":200.0,"category":"Home expenses","account":"Cash","who":"Me"},{"date":"Jan 21","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 21","month":"2026-01","name":"Dinner","amount":150.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Breakfast","amount":120.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Roti","amount":45.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Mezastar","amount":60.0,"category":"Entertainment","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Kereta","amount":44.0,"category":"Transport","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Bus","amount":36.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Dinner","amount":200.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"snack","amount":90.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 22","month":"2026-01","name":"Mezastar","amount":180.0,"category":"Entertainment","account":"ID Card","who":"Me"},{"date":"Jan 23","month":"2026-01","name":"Lunch","amount":95.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 23","month":"2026-01","name":"Snack","amount":23.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 23","month":"2026-01","name":"McD","amount":50.0,"category":"Food & Drinks","account":"Post Office Bank","who":"Me"},{"date":"Jan 23","month":"2026-01","name":"Bus","amount":18.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 23","month":"2026-01","name":"Dinner","amount":320.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 24","month":"2026-01","name":"Breakfast","amount":49.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 24","month":"2026-01","name":"Lunch","amount":85.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 23","month":"2026-01","name":"Kereta","amount":22.0,"category":"Transport","account":"Post Office Bank","who":"Me"},{"date":"Jan 24","month":"2026-01","name":"Dinner","amount":302.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 25","month":"2026-01","name":"Breakfast","amount":49.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 25","month":"2026-01","name":"Meza star","amount":150.0,"category":"Entertainment","account":"ID Card","who":"Me"},{"date":"Jan 25","month":"2026-01","name":"Bus","amount":36.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 25","month":"2026-01","name":"Dinner","amount":193.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 26","month":"2026-01","name":"Lunch","amount":140.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 26","month":"2026-01","name":"Dinner","amount":44.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 27","month":"2026-01","name":"Breakfast","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 27","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 27","month":"2026-01","name":"Dinner","amount":100.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 27","month":"2026-01","name":"Bus","amount":36.0,"category":"Transport","account":"ID Card","who":"Me"},{"date":"Jan 28","month":"2026-01","name":"Dinner","amount":159.0,"category":"Food & Drinks","account":"Post Office Bank","who":"Me"},{"date":"Jan 28","month":"2026-01","name":"Breakfast","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 28","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 29","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 29","month":"2026-01","name":"Breakfast","amount":60.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 29","month":"2026-01","name":"Dinner","amount":210.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 30","month":"2026-01","name":"Breakfast","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 30","month":"2026-01","name":"Dinner","amount":165.0,"category":"Food & Drinks","account":"Post Office Bank","who":"Me"},{"date":"Jan 31","month":"2026-01","name":"Breakfast","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 31","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 31","month":"2026-01","name":"Dinner","amount":300.0,"category":"Food & Drinks","account":"Cash","who":"Me"},{"date":"Jan 30","month":"2026-01","name":"Lunch","amount":70.0,"category":"Food & Drinks","account":"Cash","who":"Me"}],"income":[{"date":"Dec 1","month":"2025-12","name":"Input","amount":32485.0,"account":"Post Office Bank","type":""},{"date":"Dec 1","month":"2025-12","name":"Input","amount":28.0,"account":"Easy Card","type":""},{"date":"Dec 1","month":"2025-12","name":"Input","amount":122.0,"account":"ID Card","type":""},{"date":"Dec 1","month":"2025-12","name":"Input","amount":12108.0,"account":"Cash","type":""},{"date":"Dec 1","month":"2025-12","name":"Input","amount":8000.0,"account":"Savings","type":""},{"date":"Dec 1","month":"2025-12","name":"Reimburse","amount":800.0,"account":"Cash","type":"Debt Payment"},{"date":"Dec 8","month":"2025-12","name":"Reimburse Sports Day","amount":1609.0,"account":"Cash","type":""},{"date":"Dec 17","month":"2025-12","name":"Survey","amount":20.0,"account":"Cash","type":""},{"date":"Dec 18","month":"2025-12","name":"renang edbert","amount":40.0,"account":"Cash","type":""},{"date":"Dec 21","month":"2025-12","name":"Detergent Hau","amount":25.0,"account":"Cash","type":""},{"date":"Dec 26","month":"2025-12","name":"Uang saku","amount":4000.0,"account":"Post Office Bank","type":""},{"date":"Jan 4","month":"2026-01","name":"Kereta kin","amount":678.0,"account":"Cash","type":""},{"date":"Jan 4","month":"2026-01","name":"Kereta Ricky","amount":678.0,"account":"Post Office Bank","type":""},{"date":"Jan 4","month":"2026-01","name":"Kereta Hau","amount":678.0,"account":"Cash","type":""},{"date":"Jan 5","month":"2026-01","name":"Kos","amount":26000.0,"account":"Post Office Bank","type":""},{"date":"Jan 5","month":"2026-01","name":"Byr kos ricky","amount":5200.0,"account":"Post Office Bank","type":""},{"date":"Jan 5","month":"2026-01","name":"Uang sekolah","amount":24100.0,"account":"Post Office Bank","type":""},{"date":"Jan 5","month":"2026-01","name":"Kos + Kereta Edbert","amount":11878.0,"account":"Cash","type":""},{"date":"Jan 5","month":"2026-01","name":"Kos hau pt.1","amount":6200.0,"account":"Cash","type":""},{"date":"Jan 7","month":"2026-01","name":"Uang kos kin","amount":11200.0,"account":"Cash","type":""},{"date":"Jan 8","month":"2026-01","name":"Gaji","amount":2914.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 12","month":"2026-01","name":"Gaji","amount":7909.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 13","month":"2026-01","name":"Gaji","amount":1650.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 13","month":"2026-01","name":"Gaji","amount":2000.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 14","month":"2026-01","name":"Kos hau pt.2","amount":5000.0,"account":"Post Office Bank","type":""},{"date":"Jan 15","month":"2026-01","name":"Gaji","amount":3164.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 13","month":"2026-01","name":"Gaji","amount":1900.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 13","month":"2026-01","name":"Gaji","amount":1650.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 13","month":"2026-01","name":"Gaji","amount":1650.0,"account":"Post Office Bank","type":"Salary"},{"date":"Jan 26","month":"2026-01","name":"Scholarship","amount":4000.0,"account":"Post Office Bank","type":"Scholarship"}],"transfers":[{"date":"December 21, 2025","month":"2025-12","name":"Work Permit Kin","amount":100.0,"from":"Post Office Bank","to":"Cash"},{"date":"December 26, 2025","month":"2025-12","name":"T pass","amount":200.0,"from":"Cash","to":"ID Card"},{"date":"January 6, 2026","month":"2026-01","name":"Top up","amount":100.0,"from":"Cash","to":"ID Card"},{"date":"January 9, 2026","month":"2026-01","name":"ID card","amount":1000.0,"from":"Cash","to":"ID Card"},{"date":"January 15, 2026","month":"2026-01","name":"Transfer","amount":20000.0,"from":"Cash","to":"Post Office Bank"},{"date":"January 15, 2026","month":"2026-01","name":"Makan siang kin ricky","amount":304.0,"from":"Cash","to":"Post Office Bank"},{"date":"January 16, 2026","month":"2026-01","name":"transfer","amount":10.0,"from":"Cash","to":"ID Card"},{"date":"January 16, 2026","month":"2026-01","name":"Transfer","amount":1000.0,"from":"Cash","to":"Post Office Bank"},{"date":"January 16, 2026","month":"2026-01","name":"adjust","amount":30.0,"from":"ID Card","to":"Cash"},{"date":"","month":"2026-01","name":"transfer","amount":208.0,"from":"Cash","to":"Post Office Bank"},{"date":"January 20, 2026","month":"2026-01","name":"tf cuci","amount":200.0,"from":"Cash","to":"Post Office Bank"},{"date":"","month":"2026-01","name":"tiket kereta","amount":44.0,"from":"Post Office Bank","to":"Cash"},{"date":"January 26, 2026","month":"2026-01","name":"uang makan","amount":310.0,"from":"Cash","to":"Post Office Bank"}]};

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// MONTH CONFIG  (data exists ‚Üí key present; coming soon ‚Üí endDate)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const MONTHS = [
  { key:'2025-12', label:'Dec 2025', full:'December 2025',  hasData:true  },
  { key:'2026-01', label:'Jan 2026', full:'January 2026',   hasData:true  },
  { key:'2026-02', label:'Feb 2026', full:'February 2026',  hasData:false, endDate:'28 Feb 2026' },
  { key:'2026-03', label:'Mar 2026', full:'March 2026',     hasData:false, endDate:'31 Mar 2026' },
  { key:'2026-04', label:'Apr 2026', full:'April 2026',     hasData:false, endDate:'30 Apr 2026' },
  { key:'2026-05', label:'May 2026', full:'May 2026',       hasData:false, endDate:'31 May 2026' },
  { key:'2026-06', label:'Jun 2026', full:'June 2026',      hasData:false, endDate:'30 Jun 2026' },
  { key:'2026-07', label:'Jul 2026', full:'July 2026',      hasData:false, endDate:'31 Jul 2026' },
  { key:'2026-08', label:'Aug 2026', full:'August 2026',    hasData:false, endDate:'31 Aug 2026' },
  { key:'2026-09', label:'Sep 2026', full:'September 2026', hasData:false, endDate:'30 Sep 2026' },
  { key:'2026-10', label:'Oct 2026', full:'October 2026',   hasData:false, endDate:'31 Oct 2026' },
  { key:'2026-11', label:'Nov 2026', full:'November 2026',  hasData:false, endDate:'30 Nov 2026' },
  { key:'2026-12', label:'Dec 2026', full:'December 2026',  hasData:false, endDate:'31 Dec 2026' },
];

// ‚îÄ‚îÄ CATEGORY CONFIG ‚îÄ‚îÄ
const CAT_COLORS = {
  'Food & Drinks': '#3b82f6',
  'Personal':      '#8b5cf6',
  'Transport':     '#10b981',
  'Entertainment': '#f59e0b',
  'Home expenses': '#ef4444',
  'School':        '#06b6d4',
  'Adjustments':   '#475569',
  'Gifts':         '#ec4899',
  'Sport':         '#84cc16',
};
const INC_COLORS = {
  'Salary':       '#10b981',
  'Scholarship':  '#8b5cf6',
  'Debt Payment': '#3b82f6',
  'Other':        '#f59e0b',
};
const CAT_MEMES = {
  'Food & Drinks': 'üç±',
  'Personal':      'üòº',
  'Transport':     'üöå',
  'Entertainment': 'üéÆ',
  'Home expenses': 'üè†',
  'School':        'üìö',
  'Adjustments':   '‚öôÔ∏è',
};
const INC_MEMES = { 'Salary':'üíº','Scholarship':'üéì','Debt Payment':'üí≥','Other':'üì¶' };
function cc(k) { return CAT_COLORS[k] || '#475569'; }
function ic(k) { return INC_COLORS[k] || '#f59e0b'; }
function cm(k) { return CAT_MEMES[k] || '‚Ä¢'; }
function im(k) { return INC_MEMES[k] || '‚Ä¢'; }

// ‚îÄ‚îÄ UTILS ‚îÄ‚îÄ
function fmt(n) { return 'NT$' + Math.round(n).toLocaleString('en-US'); }
function byMonth(arr,m){ return arr.filter(r=>r.month===m); }
function sumArr(arr){ return arr.reduce((s,r)=>s+r.amount,0); }
function groupBy(arr,key){
  const m={};
  arr.forEach(r=>{ const k=r[key]||'Other'; m[k]=(m[k]||0)+r.amount; });
  return Object.entries(m).sort((a,b)=>b[1]-a[1]);
}

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let view = 'monthly';
let activeMonth = '2025-12';
const charts = {};

function destroyCharts(){
  Object.values(charts).forEach(c=>{ try{ c.destroy(); }catch(e){} });
  for(const k in charts) delete charts[k];
}

// ‚îÄ‚îÄ BUILD MONTH STRIP ‚îÄ‚îÄ
function buildMonthStrip(){
  const strip = document.getElementById('monthStrip');
  strip.innerHTML = MONTHS.map(m => {
    if(m.hasData){
      return `<button class="mtab${m.key===activeMonth?' active':''}" onclick="switchMonth('${m.key}',this)">
        <span class="mtab-name">${m.label}</span>
        <span class="mtab-sub">VIEW REPORT</span>
      </button>`;
    } else {
      return `<button class="mtab coming" title="Report available after ${m.endDate}" disabled>
        <span class="mtab-name">${m.label}</span>
        <span class="mtab-sub" style="color:var(--accent3)">ENDS ${m.endDate}</span>
      </button>`;
    }
  }).join('');
}

function switchMonth(key, btn){
  if(!MONTHS.find(m=>m.key===key)?.hasData) return;
  activeMonth = key;
  destroyCharts();
  buildMonthStrip();
  renderMonthly();
}

// ‚îÄ‚îÄ VIEW SWITCH ‚îÄ‚îÄ
function setView(v, btn){
  view = v;
  document.querySelectorAll('.stab').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('monthStrip').style.display = v==='monthly' ? 'flex' : 'none';
  destroyCharts();
  if(v==='monthly') renderMonthly();
  else renderYearly();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MONTHLY VIEW
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderMonthly(){
  const m    = activeMonth;
  const exp  = byMonth(DATA.expenses, m);
  const inc  = byMonth(DATA.income, m);
  const tr   = byMonth(DATA.transfers, m);
  const tExp = sumArr(exp), tInc = sumArr(inc), tTr = sumArr(tr);
  const net  = tInc - tExp;
  const expCats = groupBy(exp,'category');
  const incCats = groupBy(inc,'type');
  const mInfo = MONTHS.find(x=>x.key===m);

  document.getElementById('content').innerHTML = `
    <!-- STAT CARDS -->
    <div class="stat-row fade">
      <div class="scard s-income d1">
        <div class="scard-label">// TOTAL_INCOME</div>
        <div class="scard-val">${fmt(tInc)}</div>
        <div class="scard-meme">üò∏</div>
      </div>
      <div class="scard s-expense d2">
        <div class="scard-label">// TOTAL_EXPENSES</div>
        <div class="scard-val">${fmt(tExp)}</div>
        <div class="scard-meme">üôÄ</div>
      </div>
      <div class="scard s-transfer d3">
        <div class="scard-label">// TRANSFERS</div>
        <div class="scard-val">${fmt(tTr)}</div>
        <div class="scard-meme">üò∫</div>
      </div>
      <div class="scard s-net d4">
        <div class="scard-label">// NET_SAVINGS</div>
        <div class="scard-val ${net>=0?'pos':'neg'}">${fmt(net)}</div>
        <div class="scard-meme">${net>=0?'üòª':'üòø'}</div>
      </div>
    </div>

    <!-- CHARTS ROW -->
    <div class="two-col fade">
      <div class="panel">
        <div class="panel-hd"><h3>EXPENSE DISTRIBUTION</h3><span class="badge">${fmt(tExp)}</span></div>
        <div class="chart-wrap">
          <div class="pie-layout">
            <canvas id="pieExp" width="150" height="150"></canvas>
            <div class="leg" id="legExp"></div>
          </div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-hd"><h3>INCOME DISTRIBUTION</h3><span class="badge green">${fmt(tInc)}</span></div>
        <div class="chart-wrap">
          <div class="pie-layout">
            <canvas id="pieInc" width="150" height="150"></canvas>
            <div class="leg" id="legInc"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- BREAKDOWN BARS -->
    <div class="two-col fade">
      <div class="panel">
        <div class="panel-hd"><h3>EXPENSE BREAKDOWN</h3><span class="badge">${expCats.length} categories ¬∑ click to expand</span></div>
        <div class="bk-list">
          ${expCats.map(([cat,amt],i)=>{
            const txns = exp.filter(r=>r.category===cat);
            const id = 'ebk_'+i;
            return `<div class="bk-item">
              <div class="bk-row" onclick="toggleBk('${id}',this)">
                <span class="bk-chevron">‚ñ∂</span>
                <div class="bk-name">${cm(cat)} ${cat}</div>
                <div class="bk-track"><div class="bk-fill" style="width:${(amt/expCats[0][1]*100).toFixed(1)}%;background:${cc(cat)}"></div></div>
                <div class="bk-count">${txns.length}√ó</div>
                <div class="bk-amt" style="color:${cc(cat)}">${fmt(amt)}</div>
              </div>
              <div class="bk-txns" id="${id}">
                <table class="bk-txn-table">
                  <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>ACCOUNT</th><th>WHO</th><th>AMOUNT</th></tr></thead>
                  <tbody>
                    ${txns.map(r=>`<tr>
                      <td class="td-date">${r.date}</td>
                      <td class="td-name">${r.name}</td>
                      <td class="td-acc">${r.account}</td>
                      <td class="td-acc">${r.who||'‚Äî'}</td>
                      <td class="td-amt" style="color:${cc(cat)}">${fmt(r.amount)}</td>
                    </tr>`).join('')}
                  </tbody>
                </table>
                <div class="bk-subtotal">
                  <span>SUBTOTAL ¬∑ ${txns.length} transactions</span>
                  <strong style="color:${cc(cat)}">${fmt(amt)}</strong>
                </div>
              </div>
            </div>`;
          }).join('')}
        </div>
      </div>
      <div class="panel">
        <div class="panel-hd"><h3>INCOME BREAKDOWN</h3><span class="badge green">${incCats.length} types ¬∑ click to expand</span></div>
        <div class="bk-list">
          ${incCats.map(([type,amt],i)=>{
            const txns = inc.filter(r=>(r.type||'Other')===type);
            const id = 'ibk_'+i;
            return `<div class="bk-item">
              <div class="bk-row" onclick="toggleBk('${id}',this)">
                <span class="bk-chevron">‚ñ∂</span>
                <div class="bk-name">${im(type)} ${type||'Other'}</div>
                <div class="bk-track"><div class="bk-fill" style="width:${(amt/incCats[0][1]*100).toFixed(1)}%;background:${ic(type)}"></div></div>
                <div class="bk-count">${txns.length}√ó</div>
                <div class="bk-amt" style="color:${ic(type)}">${fmt(amt)}</div>
              </div>
              <div class="bk-txns" id="${id}">
                <table class="bk-txn-table">
                  <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>ACCOUNT</th><th>TYPE</th><th>AMOUNT</th></tr></thead>
                  <tbody>
                    ${txns.map(r=>`<tr>
                      <td class="td-date">${r.date}</td>
                      <td class="td-name">${r.name}</td>
                      <td class="td-acc">${r.account}</td>
                      <td class="td-acc">${r.type||'Other'}</td>
                      <td class="td-amt" style="color:${ic(type)}">${fmt(r.amount)}</td>
                    </tr>`).join('')}
                  </tbody>
                </table>
                <div class="bk-subtotal">
                  <span>SUBTOTAL ¬∑ ${txns.length} transactions</span>
                  <strong style="color:${ic(type)}">${fmt(amt)}</strong>
                </div>
              </div>
            </div>`;
          }).join('')}
        </div>
      </div>
    </div>

    <!-- EXPENSES TABLE -->
    <div class="panel fade" style="margin-bottom:16px">
      <div class="panel-hd"><h3>ALL EXPENSES</h3><span class="badge">${exp.length} entries</span></div>
      <div class="tbl-scroll">
        <table>
          <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>CATEGORY</th><th>ACCOUNT</th><th>WHO</th><th style="text-align:right">AMOUNT</th></tr></thead>
          <tbody>
            ${exp.map(r=>`<tr>
              <td class="td-date">${r.date}</td>
              <td class="td-name">${r.name}</td>
              <td><span class="pill" style="background:${cc(r.category)}18;color:${cc(r.category)}">${cm(r.category)} ${r.category}</span></td>
              <td class="td-acc">${r.account}</td>
              <td class="td-acc">${r.who||'‚Äî'}</td>
              <td class="td-amt" style="color:var(--accent4)">${fmt(r.amount)}</td>
            </tr>`).join('')}
          </tbody>
        </table>
      </div>
    </div>

    <!-- INCOME + TRANSFERS -->
    <div class="two-col fade">
      <div class="panel">
        <div class="panel-hd"><h3>ALL INCOME</h3><span class="badge green">${inc.length} entries</span></div>
        <div class="tbl-scroll">
          <table>
            <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>ACCOUNT</th><th>TYPE</th><th style="text-align:right">AMOUNT</th></tr></thead>
            <tbody>
              ${inc.map(r=>`<tr>
                <td class="td-date">${r.date}</td>
                <td class="td-name">${r.name}</td>
                <td class="td-acc">${r.account}</td>
                <td><span class="pill" style="background:${ic(r.type||'Other')}18;color:${ic(r.type||'Other')}">${im(r.type||'Other')} ${r.type||'Other'}</span></td>
                <td class="td-amt" style="color:var(--accent2)">${fmt(r.amount)}</td>
              </tr>`).join('')}
            </tbody>
          </table>
        </div>
      </div>
      <div class="panel">
        <div class="panel-hd"><h3>TRANSFERS</h3><span class="badge amber">${tr.length} entries</span></div>
        <div class="tbl-scroll">
          <table>
            <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>FROM</th><th>TO</th><th style="text-align:right">AMOUNT</th></tr></thead>
            <tbody>
              ${tr.length ? tr.map(r=>`<tr>
                <td class="td-date">${r.date||'‚Äî'}</td>
                <td class="td-name">${r.name}</td>
                <td class="td-acc">${r.from}</td>
                <td class="td-acc">${r.to}</td>
                <td class="td-amt" style="color:var(--accent)">${fmt(r.amount)}</td>
              </tr>`).join('') : `<tr><td colspan="5" style="text-align:center;padding:20px;font-family:var(--mono);font-size:12px;color:var(--text3)">// no transfers ‚Äî cat slept through üò¥</td></tr>`}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  `;

  requestAnimationFrame(()=>{
    drawDonut('pieExp','legExp', expCats, cc, cm, tExp);
    drawDonut('pieInc','legInc', incCats, ic, im, tInc);
  });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// YEARLY VIEW
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function renderYearly(){
  // compute totals for months with data
  const allMonthData = MONTHS.map(m=>{
    const exp = byMonth(DATA.expenses, m.key);
    const inc = byMonth(DATA.income,   m.key);
    const tExp = sumArr(exp), tInc = sumArr(inc);
    return { ...m, tExp, tInc, net: tInc-tExp };
  });
  const dataMonths = allMonthData.filter(m=>m.hasData);
  const yearInc  = dataMonths.reduce((s,m)=>s+m.tInc,0);
  const yearExp  = dataMonths.reduce((s,m)=>s+m.tExp,0);
  const yearNet  = yearInc - yearExp;
  const maxExp   = Math.max(...dataMonths.map(m=>m.tExp), 1);

  // yearly expense cat rollup
  const allExp = DATA.expenses;
  const allInc = DATA.income;
  const yCats  = groupBy(allExp,'category');
  const yIncCats = groupBy(allInc,'type');
  const yMaxCat  = yCats.length ? yCats[0][1] : 1;
  const yMaxInc  = yIncCats.length ? yIncCats[0][1] : 1;

  document.getElementById('content').innerHTML = `
    <!-- YEAR SUMMARY CARDS -->
    <div class="stat-row fade">
      <div class="scard s-income d1">
        <div class="scard-label">// YTD_INCOME</div>
        <div class="scard-val">${fmt(yearInc)}</div>
        <div class="scard-meme">üò∏</div>
      </div>
      <div class="scard s-expense d2">
        <div class="scard-label">// YTD_EXPENSES</div>
        <div class="scard-val">${fmt(yearExp)}</div>
        <div class="scard-meme">üôÄ</div>
      </div>
      <div class="scard s-net d3">
        <div class="scard-label">// YTD_NET</div>
        <div class="scard-val ${yearNet>=0?'pos':'neg'}">${fmt(yearNet)}</div>
        <div class="scard-meme">${yearNet>=0?'üòª':'üòø'}</div>
      </div>
      <div class="scard s-transfer d4">
        <div class="scard-label">// MONTHS_TRACKED</div>
        <div class="scard-val" style="color:var(--accent)">${dataMonths.length} / 12</div>
        <div class="scard-meme">üìä</div>
      </div>
    </div>

    <!-- YEARLY CATEGORY BREAKDOWN -->
    <div class="two-col fade">
      <div class="panel">
        <div class="panel-hd"><h3>YTD EXPENSE BY CATEGORY</h3><span class="badge">${fmt(yearExp)}</span></div>
        <div class="chart-wrap">
          <div class="pie-layout">
            <canvas id="yPieExp" width="150" height="150"></canvas>
            <div class="leg" id="yLegExp"></div>
          </div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-hd"><h3>YTD INCOME BY TYPE</h3><span class="badge green">${fmt(yearInc)}</span></div>
        <div class="chart-wrap">
          <div class="pie-layout">
            <canvas id="yPieInc" width="150" height="150"></canvas>
            <div class="leg" id="yLegInc"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- MONTH-BY-MONTH GRID -->
    <div class="panel fade">
      <div class="panel-hd"><h3>MONTH-BY-MONTH OVERVIEW ¬∑ 2025‚Äì2026</h3><span class="badge">${dataMonths.length} complete</span></div>
      <div class="year-grid">
        ${allMonthData.map(m=>{
          if(m.hasData){
            const pct = m.tExp/maxExp*100;
            return `<div class="ym-card has-data" onclick="openMonth('${m.key}')">
              <div class="ym-title">${m.full}</div>
              <div class="ym-row"><span class="ym-key">Income</span><span class="ym-val" style="color:var(--accent2)">${fmt(m.tInc)}</span></div>
              <div class="ym-row"><span class="ym-key">Expenses</span><span class="ym-val" style="color:var(--accent4)">${fmt(m.tExp)}</span></div>
              <div class="ym-row"><span class="ym-key">Net</span><span class="ym-val" style="color:${m.net>=0?'var(--accent2)':'var(--accent4)'}">${fmt(m.net)}</span></div>
              <div class="ym-bar"><div class="ym-bar-fill" style="width:${pct.toFixed(1)}%;background:var(--accent4)"></div></div>
            </div>`;
          } else {
            return `<div class="ym-card no-data">
              <div class="ym-title">${m.full}</div>
              <div class="ym-coming">‚è≥ COMING SOON</div>
              <div class="ym-end">Ends ${m.endDate}</div>
            </div>`;
          }
        }).join('')}
      </div>
    </div>

    <!-- YTD BREAKDOWN BARS -->
    <div class="two-col fade">
      <div class="panel">
        <div class="panel-hd"><h3>YTD EXPENSE BREAKDOWN</h3><span class="badge">click to expand</span></div>
        <div class="bk-list">
          ${yCats.map(([cat,amt],i)=>{
            const txns = DATA.expenses.filter(r=>r.category===cat);
            const id = 'ybk_'+i;
            return `<div class="bk-item">
              <div class="bk-row" onclick="toggleBk('${id}',this)">
                <span class="bk-chevron">‚ñ∂</span>
                <div class="bk-name">${cm(cat)} ${cat}</div>
                <div class="bk-track"><div class="bk-fill" style="width:${(amt/yMaxCat*100).toFixed(1)}%;background:${cc(cat)}"></div></div>
                <div class="bk-count">${txns.length}√ó</div>
                <div class="bk-amt" style="color:${cc(cat)}">${fmt(amt)}</div>
              </div>
              <div class="bk-txns" id="${id}">
                <table class="bk-txn-table">
                  <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>ACCOUNT</th><th>WHO</th><th>AMOUNT</th></tr></thead>
                  <tbody>
                    ${txns.map(r=>`<tr>
                      <td class="td-date">${r.date}</td>
                      <td class="td-name">${r.name}</td>
                      <td class="td-acc">${r.account}</td>
                      <td class="td-acc">${r.who||'‚Äî'}</td>
                      <td class="td-amt" style="color:${cc(cat)}">${fmt(r.amount)}</td>
                    </tr>`).join('')}
                  </tbody>
                </table>
                <div class="bk-subtotal">
                  <span>SUBTOTAL ¬∑ ${txns.length} transactions (all months)</span>
                  <strong style="color:${cc(cat)}">${fmt(amt)}</strong>
                </div>
              </div>
            </div>`;
          }).join('')}
        </div>
      </div>
      <div class="panel">
        <div class="panel-hd"><h3>YTD INCOME BREAKDOWN</h3><span class="badge green">click to expand</span></div>
        <div class="bk-list">
          ${yIncCats.map(([type,amt],i)=>{
            const txns = DATA.income.filter(r=>(r.type||'Other')===type);
            const id = 'yibk_'+i;
            return `<div class="bk-item">
              <div class="bk-row" onclick="toggleBk('${id}',this)">
                <span class="bk-chevron">‚ñ∂</span>
                <div class="bk-name">${im(type)} ${type||'Other'}</div>
                <div class="bk-track"><div class="bk-fill" style="width:${(amt/yMaxInc*100).toFixed(1)}%;background:${ic(type)}"></div></div>
                <div class="bk-count">${txns.length}√ó</div>
                <div class="bk-amt" style="color:${ic(type)}">${fmt(amt)}</div>
              </div>
              <div class="bk-txns" id="${id}">
                <table class="bk-txn-table">
                  <thead><tr><th>DATE</th><th>DESCRIPTION</th><th>ACCOUNT</th><th>TYPE</th><th>AMOUNT</th></tr></thead>
                  <tbody>
                    ${txns.map(r=>`<tr>
                      <td class="td-date">${r.date}</td>
                      <td class="td-name">${r.name}</td>
                      <td class="td-acc">${r.account}</td>
                      <td class="td-acc">${r.type||'Other'}</td>
                      <td class="td-amt" style="color:${ic(type)}">${fmt(r.amount)}</td>
                    </tr>`).join('')}
                  </tbody>
                </table>
                <div class="bk-subtotal">
                  <span>SUBTOTAL ¬∑ ${txns.length} transactions (all months)</span>
                  <strong style="color:${ic(type)}">${fmt(amt)}</strong>
                </div>
              </div>
            </div>`;
          }).join('')}
        </div>
      </div>
    </div>
  `;

  requestAnimationFrame(()=>{
    drawDonut('yPieExp','yLegExp', yCats,    cc, cm, yearExp);
    drawDonut('yPieInc','yLegInc', yIncCats, ic, im, yearInc);
  });
}

function openMonth(key){
  activeMonth = key;
  view = 'monthly';
  document.querySelectorAll('.stab').forEach(b=>b.classList.remove('active'));
  document.querySelector('.stab').classList.add('active');
  document.getElementById('monthStrip').style.display = 'flex';
  destroyCharts();
  buildMonthStrip();
  renderMonthly();
  window.scrollTo({top:0,behavior:'smooth'});
}

// ‚îÄ‚îÄ DONUT CHART ‚îÄ‚îÄ
function drawDonut(cid, lid, data, colorFn, emojiFn, total){
  const ctx = document.getElementById(cid);
  if(!ctx) return;
  charts[cid] = new Chart(ctx, {
    type: 'doughnut',
    data: {
      labels: data.map(([k])=>k||'Other'),
      datasets: [{
        data: data.map(([,v])=>v),
        backgroundColor: data.map(([k])=>colorFn(k)),
        borderColor: '#0f1218',
        borderWidth: 3,
        hoverBorderWidth: 2,
      }]
    },
    options: {
      cutout: '65%',
      animation: { animateRotate:true, duration:600 },
      plugins: {
        legend: { display:false },
        tooltip: {
          callbacks: {
            label: ctx => ` ${fmt(ctx.parsed)} ¬∑ ${((ctx.parsed/total)*100).toFixed(1)}%`
          },
          backgroundColor: '#141820',
          borderColor: '#1e2535',
          borderWidth: 1,
          titleColor: '#e2e8f0',
          bodyColor: '#94a3b8',
          titleFont: { family:'IBM Plex Mono', size:11 },
          bodyFont:  { family:'IBM Plex Mono', size:11 },
          padding: 10,
          cornerRadius: 4,
        }
      }
    }
  });
  const leg = document.getElementById(lid);
  if(!leg) return;
  leg.innerHTML = data.map(([k,v])=>`
    <div class="leg-item">
      <div class="leg-dot" style="background:${colorFn(k)}"></div>
      <span class="leg-name">${emojiFn(k)} ${k||'Other'}</span>
      <span class="leg-pct">${((v/total)*100).toFixed(1)}%</span>
      <span class="leg-amt">${fmt(v)}</span>
    </div>`).join('');
}

// ‚îÄ‚îÄ ACCORDION TOGGLE ‚îÄ‚îÄ
function toggleBk(id, rowEl) {
  const panel = document.getElementById(id);
  if (!panel) return;
  const isOpen = panel.classList.contains('open');
  // close all siblings in same bk-list
  const list = rowEl.closest('.bk-list');
  if (list) {
    list.querySelectorAll('.bk-txns.open').forEach(p => p.classList.remove('open'));
    list.querySelectorAll('.bk-row.open').forEach(r => r.classList.remove('open'));
  }
  if (!isOpen) {
    panel.classList.add('open');
    rowEl.classList.add('open');
  }
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
buildMonthStrip();
renderMonthly();
</script>
</body>
</html>